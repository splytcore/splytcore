{
	"info": {
		"_postman_id": "1128304c-a5e5-4356-ae5c-cd48fab9cefb",
		"name": "SplytCore.V2",
		"description": "SplytcoreUI is the repo this collection will belong into. Its official branch is affiliate for now",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "Signup",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "6c5783e3-2db7-4494-8b6b-d61b9221fa16",
						"exec": [
							"var data = JSON.parse(responseBody);",
							"pm.globals.set(\"userEmail\", data.email);",
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"name": "Content-Type",
						"value": "application/x-www-form-urlencoded",
						"type": "text"
					}
				],
				"body": {
					"mode": "urlencoded",
					"urlencoded": [
						{
							"key": "roles",
							"value": "affiliate",
							"description": "required: affiliate, seller",
							"type": "text"
						},
						{
							"key": "firstName",
							"value": "first name here",
							"description": "required",
							"type": "text"
						},
						{
							"key": "lastName",
							"value": "last name here",
							"description": "required",
							"type": "text"
						},
						{
							"key": "email",
							"value": "hi8@spl.yt",
							"description": "required, unique",
							"type": "text"
						},
						{
							"key": "password",
							"value": "splytcore2017!",
							"description": "required, 1 special char, 1 number 8+ length total",
							"type": "text"
						},
						{
							"key": "termsAndConditions",
							"value": "true",
							"description": "required: true or false",
							"type": "text"
						},
						{
							"key": "instagram",
							"value": "asdf",
							"description": "required: any string",
							"type": "text"
						}
					]
				},
				"url": {
					"raw": "{{local}}/api/auth/signup",
					"host": [
						"{{local}}"
					],
					"path": [
						"api",
						"auth",
						"signup"
					]
				},
				"description": "Signup first then sign in"
			},
			"response": []
		},
		{
			"name": "Sign in",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "49c54557-c352-4523-b6e4-608a5b932965",
						"exec": [
							"var data = JSON.parse(responseBody);",
							"pm.globals.set(\"sessionId\", data.sessionId);",
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"name": "Content-Type",
						"value": "application/x-www-form-urlencoded",
						"type": "text"
					}
				],
				"body": {
					"mode": "urlencoded",
					"urlencoded": [
						{
							"key": "email",
							"value": "{{userEmail}}",
							"description": "required",
							"type": "text"
						},
						{
							"key": "password",
							"value": "splytcore2017!",
							"description": "required",
							"type": "text"
						}
					]
				},
				"url": {
					"raw": "{{local}}/api/auth/signin",
					"host": [
						"{{local}}"
					],
					"path": [
						"api",
						"auth",
						"signin"
					]
				},
				"description": "Sign in after signing up"
			},
			"response": []
		},
		{
			"name": "Affiliate create a storefront",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "e60b3a43-9c39-41f6-a2f3-fa41a6ba8b5f",
						"exec": [
							"var data = JSON.parse(responseBody);",
							"pm.globals.set(\"storeId\", data._id);",
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"name": "Content-Type",
						"value": "application/x-www-form-urlencoded",
						"type": "text"
					},
					{
						"key": "Cookie",
						"value": "sessionId={{sessionId}}",
						"type": "text"
					}
				],
				"body": {
					"mode": "urlencoded",
					"urlencoded": [
						{
							"key": "name",
							"value": "my own store",
							"description": "required: any string",
							"type": "text"
						}
					]
				},
				"url": {
					"raw": "{{local}}/api/stores",
					"host": [
						"{{local}}"
					],
					"path": [
						"api",
						"stores"
					]
				},
				"description": "Affiliate create a storefront for my followers to refer to"
			},
			"response": []
		},
		{
			"name": "Affiliate list products to select for my store",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "439fd094-79e2-4a03-a160-65e66d4ca86c",
						"exec": [
							"var data = JSON.parse(responseBody);",
							"var index = _.random(0, data.length);",
							"pm.globals.set(\"assetId\", data[index]._id);",
							"pm.globals.set(\"asset\", JSON.stringify(data[index]));",
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": ""
				},
				"url": {
					"raw": "{{local}}/api/assets",
					"host": [
						"{{local}}"
					],
					"path": [
						"api",
						"assets"
					]
				},
				"description": "List all products so i can choose what to choose to represent as an affiliate"
			},
			"response": []
		},
		{
			"name": "Affiliate select item for store",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "cc7e0c84-a1c6-40af-bfaf-bebd4eb14448",
						"exec": [
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"name": "Content-Type",
						"value": "application/x-www-form-urlencoded",
						"type": "text"
					},
					{
						"key": "Cookie",
						"value": "sessionId={{sessionId}}",
						"type": "text"
					}
				],
				"body": {
					"mode": "urlencoded",
					"urlencoded": [
						{
							"key": "store",
							"value": "{{storeId}}",
							"description": "required",
							"type": "text"
						},
						{
							"key": "asset",
							"value": "{{assetId}}",
							"description": "required",
							"type": "text"
						}
					]
				},
				"url": {
					"raw": "{{local}}/api/storeassets",
					"host": [
						"{{local}}"
					],
					"path": [
						"api",
						"storeassets"
					]
				},
				"description": "Affiliate can select this item to be displayed in their store"
			},
			"response": []
		},
		{
			"name": "Affiliate set custom hashtag for an item",
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"name": "Content-Type",
						"value": "application/x-www-form-urlencoded",
						"type": "text"
					},
					{
						"key": "Cookie",
						"value": "sessionId={{sessionId}}",
						"type": "text"
					}
				],
				"body": {
					"mode": "urlencoded",
					"urlencoded": [
						{
							"key": "asset",
							"value": "{{asset}}",
							"description": "required: asset object",
							"type": "text"
						},
						{
							"key": "name",
							"value": "redveloster",
							"description": "required: any string",
							"type": "text"
						}
					]
				},
				"url": {
					"raw": "{{local}}/api/hashtags",
					"host": [
						"{{local}}"
					],
					"path": [
						"api",
						"hashtags"
					]
				},
				"description": "Affiliate can set custom hashtag for all the items they have selected for their store"
			},
			"response": []
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"id": "0993d26c-796b-4c1f-8110-2a15a29822af",
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"id": "38c651ff-f47a-4a02-a688-121b35e6ff5d",
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		}
	],
	"variable": [
		{
			"id": "89b7c0b1-b9fa-4833-993f-af0322573207",
			"key": "local",
			"value": "localhost:3000",
			"type": "string"
		},
		{
			"id": "67a20aae-7d89-4852-aeab-9cb59e57729c",
			"key": "qa",
			"value": "https://qa.spl.yt",
			"type": "string"
		}
	]
}